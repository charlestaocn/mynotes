
## ==执行提交的多条命令中间不会被其他的客户端打断，但是==
### Redis 事务可以一次执行多个命令， 并且带有以下三个重要的保证：

- 批量操作在发送 EXEC 命令前被放入队列缓存。
- 收到 EXEC 命令后进入事务执行，事务中任意命令执行失败，其余的命令依然被执行。
- 在事务执行过程，其他客户端提交的命令请求不会插入到事务执行命令序列中。

### 一个事务从开始到执行会经历以下三个阶段：

- 开始事务。
- 命令入队。
- 执行事务。



```
redis 127.0.0.1:7000> multi
OK
redis 127.0.0.1:7000> set a aaa
QUEUED
redis 127.0.0.1:7000> set b bbb
QUEUED
redis 127.0.0.1:7000> set c ccc
QUEUED
redis 127.0.0.1:7000> exec
1) OK
2) OK
3) OK
```

> 如果在 set b bbb 处失败，set a 已成功不会回滚，set c 还会继续执行。


|序号|命令及描述|
|---|---|
|1|[DISCARD](https://www.runoob.com/redis/transactions-discard.html)  <br>取消事务，放弃执行事务块内的所有命令。|
|2|[EXEC](https://www.runoob.com/redis/transactions-exec.html)  <br>执行所有事务块内的命令。|
|3|[MULTI](https://www.runoob.com/redis/transactions-multi.html)  <br>标记一个事务块的开始。|
|4|[UNWATCH](https://www.runoob.com/redis/transactions-unwatch.html)  <br>取消 WATCH 命令对所有 key 的监视。|
|5|[WATCH key [key ...]](https://www.runoob.com/redis/transactions-watch.html)  <br>监视一个(或多个) key ，如果在事务执行之前这个(或这些) key 被其他命令所改动，那么事务将被打断。|

