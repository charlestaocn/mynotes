
## pom依赖


```xml

<dependencies>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-data-mongodb-reactive</artifactId>
    </dependency>

    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-webflux</artifactId>
    </dependency>
</dependencies>

```


![[19b3f1e490aacb3ba64fbb39ce44e770_MD5.jpeg]]


## application.yml

```yml

spring:  
  data:  
    mongodb:  
      host: 120.26.242.221  
      port: 27017  
      database: testDB
      
```

```java
@SpringBootApplication  
@EnableReactiveMongoAuditing  //生成创建时间注解
public class PlaygroundReactiveApplication {  
  
    public static void main(String[] args) {  
        SpringApplication.run(PlaygroundReactiveApplication.class, args);  
    }  
  
}
```
## entity

```java

@Document("user")  
@Data  
public class User {  
    @Id  
    private String id;  
    private Integer depId;  
    @Indexed  
    private String userName;  
    private String password;  
    @CreatedDate  
    private LocalDateTime createTime;  
    @LastModifiedDate  
    private LocalDateTime modifyTime;  
}

```


## Dao 层 接口

```java

@Repository  
public interface UserDao extends ReactiveMongoRepository<User, String> {  
}
```



## 业务层使用

```java

@Autowired  
private TestDao testDao;  
  
@Autowired  
private ReactiveMongoTemplate template;


public Mono<User> insertUser(User user) {  
    return userDao.save(user);  
}  
  
public Mono<UpdateResult> updateUserPassword(String username, String password) {  
    return reactiveMongoTemplate.updateFirst(new Query(Criteria.where("userName").is(username)), new Update().set("password", password), User.class);  
}  
  
public Mono<User> getUserByUserNameMatcher(String userName) {  
    User user = new User();  
    user.setUserName(userName);  
    return userDao.findOne(Example.of(user, ExampleMatcher.matching().withMatcher("userName", ExampleMatcher.GenericPropertyMatchers.exact())));  
}


```